CREATE TABLE Users (
  id INT IDENTITY(101, 1) PRIMARY KEY ,
  name VARCHAR(255) NOT NULL,
  email VARCHAR(255) NOT NULL,
  password VARCHAR(255) NOT NULL,
  created_at DATETIME2(0) DEFAULT SYSUTCDATETIME(),
  role VARCHAR(50) NOT NULL CONSTRAINT DF_users_role DEFAULT 'customer'
  CHECK (role IN ('admin', 'customer'))
);

CREATE TABLE Stores (
  id INT IDENTITY(101, 1) PRIMARY KEY,
  name VARCHAR(255) NOT NULL,
  address VARCHAR(255),
  city VARCHAR(255),
  state VARCHAR(255),
  country VARCHAR(255),
  zip_code VARCHAR(10),
  created_at DATETIME2(0) DEFAULT SYSUTCDATETIME()
);

CREATE TABLE Products (
  id INT IDENTITY(101, 1) PRIMARY KEY ,
  name VARCHAR(255) NOT NULL,
  category_id INT NOT NULL,
  description TEXT,
  image VARCHAR(255),
  price DECIMAL(10, 2) NOT NULL,
  created_at DATETIME2(0) DEFAULT SYSUTCDATETIME()
);

CREATE TABLE Categories (
  id INT IDENTITY(101, 1) PRIMARY KEY ,
  name VARCHAR(255) NOT NULL,
  parent_id INT DEFAULT NULL,
  created_at DATETIME2(0) DEFAULT SYSUTCDATETIME()
);

CREATE TABLE Wishlists (
  id INT IDENTITY(101, 1) PRIMARY KEY ,
  user_id INT NOT NULL,
  product_id INT NOT NULL,
  created_at DATETIME2(0) DEFAULT SYSUTCDATETIME(),
  FOREIGN KEY (user_id) REFERENCES Users(id),
  FOREIGN KEY (product_id) REFERENCES Products(id)
);


-- Inserting data into 'users' table
INSERT INTO users (name, email, password, created_at, role)
VALUES ('John Doe', 'johndoe@example.com', 'password123', SYSUTCDATETIME(), 'customer'),
       ('Jane Smith', 'janesmith@example.com', 'password456', SYSUTCDATETIME(), 'admin'),
       ('Bob Johnson', 'bobjohnson@example.com', 'password789', SYSUTCDATETIME(), 'customer');

-- Inserting data into 'stores' table
INSERT INTO stores (name, address, city, state, country, zip_code, created_at)
VALUES ('Store 1', '123 Main St', 'Anytown', 'CA', 'USA', '12345', SYSUTCDATETIME()),
       ('Store 2', '456 Oak St', 'Anycity', 'NY', 'USA', '67890', SYSUTCDATETIME());

-- Inserting data into 'categories' table
INSERT INTO categories (name, parent_id, created_at)
VALUES ('Electronics', NULL, SYSUTCDATETIME()),
       ('Computers', 1, SYSUTCDATETIME()),
       ('Smartphones', 1, SYSUTCDATETIME()),
       ('Laptops', 2, SYSUTCDATETIME());

-- Inserting data into 'products' table
INSERT INTO products (name, category_id, description, image, price, created_at)
VALUES ('iPhone 12', 3, 'The latest iPhone', 'iphone12.jpg', 999.99, SYSUTCDATETIME()),
       ('MacBook Pro', 4, 'Powerful laptop for professionals', 'macbookpro.jpg', 1499.99, SYSUTCDATETIME()),
       ('Samsung Galaxy S21', 3, 'Samsung\'s latest flagship smartphone', 'galaxys21.jpg', 899.99, SYSUTCDATETIME());

-- Inserting data into 'wishlists' table
INSERT INTO wishlists (user_id, product_id, created_at)
VALUES (1, 1, SYSUTCDATETIME()),
       (1, 3, SYSUTCDATETIME()),
       (2, 2, SYSUTCDATETIME()),
       (3, 3, SYSUTCDATETIME());
